var rdfx=rdfx||{};rdfx.h5pres=function(){"use strict";var e,t,n,r,i=0,s=!1,o=!0,u=0,a={backspace:8,tab:9,escape:27,pageup:33,pagedown:34,end:35,home:36,left:37,up:38,right:39,down:40,slash:191,f_five:116},f={slide:"s",debug:"debug"},l=!1,c=function(){var e,t,n={},r;if(location.hash){r=location.hash.substring(1).split("&");for(e=0;e<r.length;e+=1)t=r[e].split("="),n[t[0]]=t[1]}return n},h=function(e){return c()[e]},p=function(e,t){var n,r=[],i=c();i[e]=t;for(n in i)i.hasOwnProperty(n)&&r.push(n+"="+i[n]);location.hash=r.join("&")},d=function(){},v=function(e){var t=e.querySelectorAll("figure.bg img");t&&t[0]&&t[0].src?(document.body.style.background="url("+t[0].src+")",document.body.style.backgroundSize="cover"):(document.body.style.backgroundImage="",e.style.background="");var n=document.getElementById("presoshim");n.style.display=""},m=function(){var t,n,r,i=e.length-1;for(n=0;n<e.length;n++)r=document.createElement("meter"),r.setAttribute("value",n),r.setAttribute("min",0),r.setAttribute("max",i),r.setAttribute("title","slide"+n),r.setAttribute("class","sideme"),r.appendChild(document.createTextNode(n+"/"+i)),e[n].insertBefore(r,e[n].firstChild)},g=function(e){var t,r,i;for(r=0;r<n.length;r++)n[r].style.display!="none"&&(n[r].style.display="none");for(r=0;r<n.length;r++){t=e.compareDocumentPosition(n[r]);switch(t){case 0:n[r].style.display="";break;case 2:case 4:break;case 10:n[r].style.display="",o&&(i=n[r].querySelector("h1"),i&&(i.style.display=""));break;default:n[r].nodeName!=="SECTION"&&(n[r].style.display="",o&&n[r].parentNode&&(i=n[r].parentNode.querySelector("h1"),i&&(i.style.display="",i.setAttribute("style","font-size: -20%;"))))}}v(e)},y=function(e){e&&e.style&&(e.style.display="none")},b=function(e){e.style.display=""},w=function(t){var n;s&&(n=u+t,n=Math.max(n,0),n=Math.min(n,e.length-1),n!==u&&(y(e[u]),g(e[n]),p(f.slide,n+1)),u=n)},E=function(e){var t,n=[];for(t=0;t<e.length;t++)n.push(e[t]);return n},S=function(){e.forEach(y),g(e[u]),s=!0;var t=document.documentElement;t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullScreen&&t.webkitRequestFullScreen()},x=function(){n.forEach(b),e.forEach(b),s=!1,document.body.style.backgroundImage="",document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen()},T=function(){r[i].disabled=!0,i=(i+1)%r.length,r[i].disabled=!1,r[i].title==="presentation"?S():x()},N=function(e){switch(e.keyCode){case a.right:case a.down:this.changeCurrent(1);break;case a.left:case a.up:this.changeCurrent(-1);break;case a.f_five:case a.escape:e.ctrlKey?(o=!o,this.changeCurrent(-1),this.changeCurrent(1)):this.activateNextStyleSheet();break;case a.slash:e.ctrlKey&&this.activateNextStyleSheet()}return!1},C=function(){var e=document.createElement("link");e.href="/pinc/preso.css",e.title="presentation",e.media="screen",e.type="text/css",e.rel="stylesheet",e.disabled=!0,document.getElementsByTagName("head")[0].appendChild(e)},k=function(){console.log("start"),C(),L(),r=document.querySelectorAll("link[media~=screen][rel~=stylesheet], link[media~=all][rel~=stylesheet]"),e=E(document.querySelectorAll("article>section, section>section")),t=E(document.getElementsByTagName("body")),n=E(document.querySelectorAll("body *")),u=h(f.slide)?parseInt(h(f.slide),10)-1:0,l=h(f.debug)?!0:!1,m(),window.addEventListener("keydown",N.bind(rdfx.h5pres),!1)},L=function(){var e=document.querySelector("body");e.innerHTML+='<menu type="context" id="presentmenu"><menuitem label="Toggle Slide View" onclick="rdfx.h5pres.activateNextStyleSheet()" icon="/favicon.ico"></menuitem></menu>';var t=E(document.querySelectorAll("article"));for(var n=0;n<t.length;n++)t[n].setAttribute("contextmenu","presentmenu")};return{loaded:k.bind(rdfx.h5pres),activateNextStyleSheet:T.bind(rdfx.h5pres),changeCurrent:w.bind(this)}}(),rdfx.h5pres.loaded();